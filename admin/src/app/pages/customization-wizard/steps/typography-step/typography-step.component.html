<div class="mx-auto max-w-5xl">
  <!-- Header -->
  <div class="mb-6">
    <h2 class="text-2xl font-bold text-gray-900">Typography</h2>
    <p class="mt-1 text-sm text-gray-600">
      Configure fonts and text styles for your entire site.
    </p>
  </div>

  @if (typography(); as currentTypography) {
    <!-- Font Families Section -->
    <div class="mb-8 rounded-xl bg-white p-6 shadow-md">
      <div class="mb-4 flex items-center gap-3">
        <div class="flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600">
          <cms-icon name="font" [style]="'solid'"  class="h-5 w-5 text-white"></cms-icon>
        </div>
        <div>
          <h3 class="text-lg font-bold text-gray-900">Font Families</h3>
          <p class="text-sm text-gray-600">Choose Google Fonts for different text categories</p>
        </div>
      </div>

      <div class="grid grid-cols-1 gap-4 md:grid-cols-3">
        <!-- Primary Font -->
        <div class="rounded-lg border border-gray-200 bg-gray-50 p-4">
          <label class="mb-2 block text-sm font-semibold text-gray-900">
            <cms-icon name="font" [style]="'solid'"  class="mr-1 inline h-4 w-4"></cms-icon>
            Primary Font
          </label>
          <p class="mb-3 text-xs text-gray-600">Headings and titles</p>
          <select
            [value]="currentTypography.primaryFontFamily"
            (change)="updateFontFamily('primaryFontFamily', $any($event.target).value); loadGoogleFont($any($event.target).value)"
            class="w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500"
          >
            @for (font of getFontsForCategory('sans-serif'); track font.name) {
              <option [value]="font.name">{{ font.name }}</option>
            }
            @for (font of getFontsForCategory('serif'); track font.name) {
              <option [value]="font.name">{{ font.name }} (Serif)</option>
            }
          </select>
          <div class="mt-3 rounded bg-white p-3 text-center" [style.font-family]="currentTypography.primaryFontFamily">
            <span class="text-lg font-semibold">AaBbCc 123</span>
          </div>
        </div>

        <!-- Secondary Font -->
        <div class="rounded-lg border border-gray-200 bg-gray-50 p-4">
          <label class="mb-2 block text-sm font-semibold text-gray-900">
            <cms-icon name="align-left" [style]="'solid'"  class="mr-1 inline h-4 w-4"></cms-icon>
            Secondary Font
          </label>
          <p class="mb-3 text-xs text-gray-600">Body text and paragraphs</p>
          <select
            [value]="currentTypography.secondaryFontFamily"
            (change)="updateFontFamily('secondaryFontFamily', $any($event.target).value); loadGoogleFont($any($event.target).value)"
            class="w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500"
          >
            @for (font of getFontsForCategory('sans-serif'); track font.name) {
              <option [value]="font.name">{{ font.name }}</option>
            }
            @for (font of getFontsForCategory('serif'); track font.name) {
              <option [value]="font.name">{{ font.name }} (Serif)</option>
            }
          </select>
          <div class="mt-3 rounded bg-white p-3 text-center" [style.font-family]="currentTypography.secondaryFontFamily">
            <span class="text-lg">AaBbCc 123</span>
          </div>
        </div>

        <!-- Monospace Font -->
        <div class="rounded-lg border border-gray-200 bg-gray-50 p-4">
          <label class="mb-2 block text-sm font-semibold text-gray-900">
            <cms-icon name="code" [style]="'solid'"  class="mr-1 inline h-4 w-4"></cms-icon>
            Monospace Font
          </label>
          <p class="mb-3 text-xs text-gray-600">Code and technical text</p>
          <select
            [value]="currentTypography.monoFontFamily"
            (change)="updateFontFamily('monoFontFamily', $any($event.target).value); loadGoogleFont($any($event.target).value)"
            class="w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500"
          >
            @for (font of getFontsForCategory('monospace'); track font.name) {
              <option [value]="font.name">{{ font.name }}</option>
            }
          </select>
          <div class="mt-3 rounded bg-white p-3 text-center" [style.font-family]="currentTypography.monoFontFamily">
            <span class="text-lg">AaBbCc 123</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Text Styles Section -->
    <div class="space-y-6">
      @for (group of textStyleGroups; track group.title) {
        <div class="rounded-xl bg-white p-6 shadow-md">
          <!-- Group header -->
          <div class="mb-4 flex items-center gap-3">
            <div class="flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-purple-600">
              <cms-icon [name]="group.icon" [style]="'solid'"  class="h-5 w-5 text-white"></cms-icon>
            </div>
            <div>
              <h3 class="text-lg font-bold text-gray-900">{{ group.title }}</h3>
              <p class="text-sm text-gray-600">{{ group.description }}</p>
            </div>
          </div>

          <!-- Text style rows -->
          <div class="space-y-4">
            @for (style of group.styles; track style.key) {
              <div class="overflow-hidden rounded-lg border border-gray-200 bg-gray-50">
                <!-- Style header -->
                <div class="bg-white px-4 py-3">
                  <div class="flex items-center justify-between">
                    <div>
                      <span class="font-semibold text-gray-900">{{ style.label }}</span>
                      <span class="ml-2 text-xs text-gray-500">{{ style.description }}</span>
                    </div>
                  </div>
                </div>

                <!-- Style controls and preview -->
                <div class="grid grid-cols-1 gap-4 p-4 lg:grid-cols-2">
                  <!-- Controls -->
                  <div class="space-y-3">
                    <!-- Font Size -->
                    <div>
                      <label class="mb-1 block text-xs font-medium text-gray-700">Font Size (rem)</label>
                      <div class="flex items-center gap-2">
                        <input
                          type="range"
                          min="0.5"
                          max="4"
                          step="0.125"
                          [value]="getTextStyle(style.key).fontSize"
                          (input)="updateTextStyle(style.key, { fontSize: +$any($event.target).value })"
                          class="flex-1"
                        />
                        <input
                          type="number"
                          min="0.5"
                          max="4"
                          step="0.125"
                          [value]="getTextStyle(style.key).fontSize"
                          (input)="updateTextStyle(style.key, { fontSize: +$any($event.target).value })"
                          class="w-20 rounded border border-gray-300 px-2 py-1 text-sm"
                        />
                      </div>
                    </div>

                    <!-- Font Weight -->
                    <div>
                      <label class="mb-1 block text-xs font-medium text-gray-700">Font Weight</label>
                      <select
                        [value]="getTextStyle(style.key).fontWeight"
                        (change)="updateTextStyle(style.key, { fontWeight: +$any($event.target).value })"
                        class="w-full rounded border border-gray-300 px-2 py-1 text-sm"
                      >
                        @for (weight of fontWeightOptions; track weight.value) {
                          <option [value]="weight.value">{{ weight.label }} ({{ weight.value }})</option>
                        }
                      </select>
                    </div>

                    <!-- Line Height -->
                    <div>
                      <label class="mb-1 block text-xs font-medium text-gray-700">Line Height</label>
                      <div class="flex items-center gap-2">
                        <input
                          type="range"
                          min="1"
                          max="3"
                          step="0.1"
                          [value]="getTextStyle(style.key).lineHeight"
                          (input)="updateTextStyle(style.key, { lineHeight: +$any($event.target).value })"
                          class="flex-1"
                        />
                        <input
                          type="number"
                          min="1"
                          max="3"
                          step="0.1"
                          [value]="getTextStyle(style.key).lineHeight"
                          (input)="updateTextStyle(style.key, { lineHeight: +$any($event.target).value })"
                          class="w-20 rounded border border-gray-300 px-2 py-1 text-sm"
                        />
                      </div>
                    </div>

                    <!-- Letter Spacing -->
                    <div>
                      <label class="mb-1 block text-xs font-medium text-gray-700">Letter Spacing (em)</label>
                      <div class="flex items-center gap-2">
                        <input
                          type="range"
                          min="-0.2"
                          max="0.5"
                          step="0.01"
                          [value]="getTextStyle(style.key).letterSpacing || 0"
                          (input)="updateTextStyle(style.key, { letterSpacing: +$any($event.target).value })"
                          class="flex-1"
                        />
                        <input
                          type="number"
                          min="-0.2"
                          max="0.5"
                          step="0.01"
                          [value]="getTextStyle(style.key).letterSpacing || 0"
                          (input)="updateTextStyle(style.key, { letterSpacing: +$any($event.target).value })"
                          class="w-20 rounded border border-gray-300 px-2 py-1 text-sm"
                        />
                      </div>
                    </div>

                    <!-- Text Transform -->
                    <div>
                      <label class="mb-1 block text-xs font-medium text-gray-700">Text Transform</label>
                      <select
                        [value]="getTextStyle(style.key).textTransform"
                        (change)="updateTextStyle(style.key, { textTransform: +$any($event.target).value })"
                        class="w-full rounded border border-gray-300 px-2 py-1 text-sm"
                      >
                        @for (transform of textTransformOptions; track transform.value) {
                          <option [value]="transform.value">{{ transform.label }}</option>
                        }
                      </select>
                    </div>
                  </div>

                  <!-- Live Preview -->
                  <div class="flex items-center justify-center rounded-lg bg-white p-6 border border-gray-200">
                    <div
                      class="text-center"
                      [style.font-family]="style.key <= 5 ? currentTypography.primaryFontFamily : currentTypography.secondaryFontFamily"
                      [style.font-size]="getTextStyle(style.key).fontSize"
                      [style.font-weight]="getTextStyle(style.key).fontWeight"
                      [style.line-height]="getTextStyle(style.key).lineHeight"
                      [style.letter-spacing]="getTextStyle(style.key).letterSpacing"
                      [style.text-transform]="getTextStyle(style.key).textTransform === 0 ? 'none' : getTextStyle(style.key).textTransform === 1 ? 'uppercase' : getTextStyle(style.key).textTransform === 2 ? 'lowercase' : 'capitalize'"
                    >
                      {{ getPreviewText(style.key) }}
                    </div>
                  </div>
                </div>
              </div>
            }
          </div>
        </div>
      }
    </div>

    <!-- Full Preview Section -->
    <div class="mt-8 rounded-xl bg-white p-6 shadow-md">
      <h3 class="mb-4 text-lg font-bold text-gray-900">Complete Typography Preview</h3>
      <div class="space-y-4 rounded-lg border border-gray-200 bg-gray-50 p-6">
        @for (group of textStyleGroups; track group.title) {
          @for (style of group.styles; track style.key) {
            <div
              [style.font-family]="style.key <= 5 ? currentTypography.primaryFontFamily : currentTypography.secondaryFontFamily"
              [style.font-size]="getTextStyle(style.key).fontSize"
              [style.font-weight]="getTextStyle(style.key).fontWeight"
              [style.line-height]="getTextStyle(style.key).lineHeight"
              [style.letter-spacing]="getTextStyle(style.key).letterSpacing"
              [style.text-transform]="getTextStyle(style.key).textTransform === 0 ? 'none' : getTextStyle(style.key).textTransform === 1 ? 'uppercase' : getTextStyle(style.key).textTransform === 2 ? 'lowercase' : 'capitalize'"
            >
              {{ getPreviewText(style.key) }}
            </div>
          }
        }
      </div>
    </div>
  }
</div>
